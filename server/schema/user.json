{
    "definitions": {
        "textShort": {
          "type": "string",
          "pattern": "^[!<>\r\n]*$"
        },
        "textLong": {
          "type": "string",
          "pattern": "^[!<>]*$"
        }
    },
    "type": "object",
	"properties": {
		"username": {
            "type": "string",
            "pattern": "^[abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_]{1,15}$"
        },

		"email": {
            "type": "string",
            "format": "email"
        },

        "password": {
            "description": "Validates the user-input password as well as the hash. Hash is stored. Minimum password length is 6 characters.",
            "type": "string",
            "pattern": "^.{6,}$"
        },

		"first": { "$ref": "#/definitions/textShort" },
		"last": { "$ref": "#/definitions/textShort" },

        "organizations": {
            "type": "array",
            "items": { "$ref": "#/definitions/textShort" },
            "default": []
        },

        "phone": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "number": { "type": "string" },
                    "location": { "$ref": "#/definitions/textShort" }
                },
                "required": ["number"]
            },
            "default": []
        },

        "descShort": {
            "$ref": "#/definitions/textShort",
            "default": ""
        },
        "descLong": {
            "$ref": "#/definitions/textLong",
            "default": ""
        },

        "picture": {
            "type": "string",
            "format": "uri"
        },
        
        "creation": { "type": "number"},

        "verified": {
            "type": "boolean",
            "default": false
        },

        "sensors": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "default": []
        },

        "timezone": {
            "type": "number",
            "minimum": -11,
            "maximum": 14,
            "multipleOf": 0.5
        },

        "publicity": {
            "type": "array",
            "items": {
                "type": "string",
                "enum": [
                    "first",
                    "last",
                    "email",
                    "description",
                    "creation",
                    "timezone",
                    "phone",
                    "organizations"
                ]
            },
            "default": [
                "first",
                "last",
                "email",
                "description",
                "creation",
                "timezone",
                "phone",
                "organizations"
            ]
        }
	},
	"required": [
        "username",
        "email",
        "password",
        "creation",
        "descShort",
        "descLong",
        "verified",
        "sensors",
        "timezone",
        "publicity"
    ]
}